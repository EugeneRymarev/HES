@if (Employee == null || Accounts == null)
{
    <LoadingPage />
}
else
{
    <div class="row align-items-center details-card mb-3">
        <div class="col-auto">
            <h1 class="text-navyblue text-break m-0">@Employee.FullName</h1>
        </div>
        <div class="col"></div>

        <div class="col-auto pl-1 pr-1">
            <ButtonSpinner Class="btn-primary" Text="Add device" Callback="AddDeviceAsync" />
        </div>
        <div class="col-auto pl-1 pr-1">
            <ButtonSpinner Class="btn-primary" Text="Create personal account" Callback="CreatePersonalAccountAsync" />
        </div>
        <div class="col-auto pl-1">
            <ButtonSpinner Class="btn-primary" Text="Add shared account" Callback="AddSharedAccountAsync" />
        </div>
    </div>

    @if (Employee.HardwareVaults.Count > 0)
    {
        @if (Employee.HardwareVaults.Count > 1)
        {
            <h4 class="text-navyblue">Devices</h4>
        }
        else
        {
            <h4 class="text-navyblue">Device</h4>
        }
        <ul class="list-group w-100 mb-3">
            @foreach (var hardwareVault in Employee.HardwareVaults)
            {
                <li class="list-group-item d-flex justify-content-between align-items-center">
                    <div class="d-flex align-items-center">
                        <img class="mr-1" src="/svg/icon-hardware-vault.svg" />
                        <span class="font-weight-bold mr-1">@hardwareVault.Id</span>
                        <span class="mr-1">- @(hardwareVault.LicenseEndDate != null ? $"License till {hardwareVault.LicenseEndDate.Value.ToShortDateString()}" : "License status None")</span>
                        <span class="mr-2">- @hardwareVault.Status</span>
                        @if (hardwareVault.IsOnline)
                        {
                            <span class="badge badge-success">Online</span>
                        }
                    </div>
                    <div>
                        <button type="button" @onclick="RemoveHardwareVaultAsync" class="btn btn-light border mx-2" title="Remove device from employee">
                            <img class="icon-btn" src="/svg/action/delete.svg" />
                            Delete
                        </button>
                    </div>
                </li>
            }
        </ul>
    }

    @if (Accounts.Count > 0)
    {
        <h4 class="text-navyblue mb-1 mt-4">Accounts</h4>

        <TableAction>
            <ActionButtons>

            </ActionButtons>
            <FilterButtons>
                <TableFilter EnableFilterButton="false" SearchTextChanged="SearchTextChangedAsync" />
            </FilterButtons>
        </TableAction>

        <MainTable Items="Accounts" SelectedItem="@SelectedAccount" SelecedItemChanged="SelectedItemChangedAsync">
            <TableHeader>
                <MainTableHeader Title="Name"
                                 TitleWidth="7.1"
                                 SortColumn="@nameof(Account.Name)"
                                 CurrentSortedColumn="@SortedColumn"
                                 SortedColumnChanged="SortedColumnChangedAsync"
                                 SortDirectionChanged="SortDirectionChangedAsync" />
                <MainTableHeader Title="Urls"
                                 TitleWidth="7.1"
                                 SortColumn="@nameof(Account.Urls)"
                                 CurrentSortedColumn="@SortedColumn"
                                 SortedColumnChanged="SortedColumnChangedAsync"
                                 SortDirectionChanged="SortDirectionChangedAsync" />
                <MainTableHeader Title="Apps"
                                 TitleWidth="7.1"
                                 SortColumn="@nameof(Account.Apps)"
                                 CurrentSortedColumn="@SortedColumn"
                                 SortedColumnChanged="SortedColumnChangedAsync"
                                 SortDirectionChanged="SortDirectionChangedAsync" />
                <MainTableHeader Title="Login"
                                 TitleWidth="7.1"
                                 SortColumn="@nameof(Account.Login)"
                                 CurrentSortedColumn="@SortedColumn"
                                 SortedColumnChanged="SortedColumnChangedAsync"
                                 SortDirectionChanged="SortDirectionChangedAsync" />
                <MainTableHeader Title="Type"
                                 TitleWidth="7.1"
                                 SortColumn="@nameof(Account.Type)"
                                 CurrentSortedColumn="@SortedColumn"
                                 SortedColumnChanged="SortedColumnChangedAsync"
                                 SortDirectionChanged="SortDirectionChangedAsync" />
                <MainTableHeader Title="Created"
                                 TitleWidth="7.1"
                                 SortColumn="@nameof(Account.CreatedAt)"
                                 CurrentSortedColumn="@SortedColumn"
                                 SortedColumnChanged="SortedColumnChangedAsync"
                                 SortDirectionChanged="SortDirectionChangedAsync" />
                <MainTableHeader Title="Updated"
                                 TitleWidth="7.1"
                                 SortColumn="@nameof(Account.UpdatedAt)"
                                 CurrentSortedColumn="@SortedColumn"
                                 SortedColumnChanged="SortedColumnChangedAsync"
                                 SortDirectionChanged="SortDirectionChangedAsync" />
                <MainTableHeader Title="Password Updated"
                                 TitleWidth="7.1"
                                 SortColumn="@nameof(Account.PasswordUpdatedAt)"
                                 CurrentSortedColumn="@SortedColumn"
                                 SortedColumnChanged="SortedColumnChangedAsync"
                                 SortDirectionChanged="SortDirectionChangedAsync" />
                <MainTableHeader Title="Otp Updated"
                                 TitleWidth="7.1"
                                 SortColumn="@nameof(Account.OtpUpdatedAt)"
                                 CurrentSortedColumn="@SortedColumn"
                                 SortedColumnChanged="SortedColumnChangedAsync"
                                 SortDirectionChanged="SortDirectionChangedAsync" />
            </TableHeader>
            <TableRow>
                <td>
                    @context.Name
                </td>
                <td>
                    @context.Urls
                </td>
            </TableRow>
        </MainTable>
        <Pagination CurrentPageChanged="CurrentPageChangedAsync"
                    DisplayRowsChanged="DisplayRowsChangedAsync"
                    TotalRecords="TotalRecords"
                    CurrentPage="CurrentPage"
                    DisplayRows="DisplayRows"
                    DisplayRecords="Accounts.Count" />
    }
}